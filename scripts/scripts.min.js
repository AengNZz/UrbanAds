gsap.registerPlugin(ScrollTrigger);class AnimationsManager{constructor(){this.isInitialized=!1,this.previousWidth=window.innerWidth,this.rafId=null,this.init()}init(){this.isInitialized||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.initAllAnimations())):this.initAllAnimations(),this.setupEventListeners(),this.isInitialized=!0)}setupEventListeners(){let e;window.addEventListener("resize",(()=>{clearTimeout(e),e=setTimeout((()=>this.handleResize()),150)}),{passive:!0})}handleResize(){const e=window.innerWidth;this.previousWidth!==e&&(ScrollTrigger.refresh(),this.previousWidth=e)}isMobile(){return window.innerWidth<820}safeQuerySelectorAll(e,t=document){try{return Array.from(t.querySelectorAll(e))}catch{return[]}}initAllAnimations(){this.killAllAnimations(),this.isMobile()||(this.initHeroAnimation(),this.initDecorAnimations()),this.initMarquee(),this.initAccordion(),requestAnimationFrame((()=>{setTimeout((()=>ScrollTrigger.refresh()),100)}))}killAllAnimations(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),ScrollTrigger.getAll().forEach((e=>e.kill()))}initHeroAnimation(){const e=gsap.timeline();[{selector:".hero__logo",y:-30,scale:.85},{selector:".key",y:-30,scale:.85,position:"-=0.6"},{selector:".hero__company-list, .hero__company-item svg",y:20,scale:.9,stagger:.08,position:"-=0.6"},{selector:".hero__data-item",y:20,scale:.9,stagger:.08,position:"-=0.6"},{selector:".hero__text",y:25,scale:.9,position:"-=0.6"}].forEach((({selector:t,position:i,...r})=>{const o=this.safeQuerySelectorAll(t);o.length&&e.from(o,{duration:.8,opacity:0,ease:"back.out(1.7)",...r,force3D:!0,willChange:"transform, opacity"},i)}))}getElementPositionRatio(e){if(!e.parentElement)return{x:.5,y:.5};const t=e.getBoundingClientRect(),i=e.parentElement.getBoundingClientRect();return{x:(t.left-i.left+t.width/2)/i.width,y:(t.top-i.top+t.height/2)/i.height}}getDisappearAnimation({x:e,y:t}){const i=(e,t)=>this.randomBetween(e,t);return e<.4?{x:i(-120,-80),y:i(30,60),scale:.97}:e>.6?{x:i(80,120),y:i(30,60),scale:.97}:t<.4?{x:i(-40,40),y:i(-120,-80),scale:.97}:t>.6?{x:i(-40,40),y:i(80,120),scale:.97}:{x:0,y:i(30,60),scale:.8}}getAppearAnimation({x:e,y:t}){const i=(e,t)=>this.randomBetween(e,t);return e<.4?{x:i(-120,-80),y:i(30,60),scale:.8,rotate:i(-25,-15)}:e>.6?{x:i(80,120),y:i(30,60),scale:.8,rotate:i(15,25)}:t<.4?{x:i(-40,40),y:i(-120,-80),scale:.8,rotate:i(-10,10)}:t>.6?{x:i(-40,40),y:i(80,120),scale:.8,rotate:i(-10,10)}:{x:0,y:i(50,80),scale:.7}}randomBetween(e,t){return gsap.utils.random(e,t)}initDecorAnimations(){[{selector:".hero-decor *",type:"disappear",start:"center 6%"},{selector:".for-whom-decor .decor *",type:"disappear",start:"center 42%"},{selector:".program-decor .decor *",type:"disappear",start:"center 30%"},{selector:".faq-decor .decor *",type:"appear",start:"top top"}].forEach((({selector:e,type:t,start:i})=>{const r=this.safeQuerySelectorAll(e);r.length&&this.animateDecorElements(r,t,i)}))}animateDecorElements(e,t,i){e.forEach(((e,r)=>{const o=this.getElementPositionRatio(e),n="disappear"===t?this.getDisappearAnimation(o):this.getAppearAnimation(o);"disappear"===t?this.createDisappearAnimation(e,n,i,r):this.createAppearAnimation(e,n,r)}))}createDisappearAnimation(e,t,i,r){gsap.fromTo(e,{x:0,y:0,scale:1,opacity:1,filter:"blur(0px)"},{...t,opacity:0,filter:"blur(8px)",ease:"power3.out",force3D:!0,scrollTrigger:{trigger:e,start:i,end:"bottom 20%",scrub:2,toggleActions:"play none none reverse",invalidateOnRefresh:!0},delay:.025*r})}createAppearAnimation(e,t,i){gsap.fromTo(e,{...t,opacity:0,filter:"blur(12px)"},{x:0,y:0,scale:1,rotate:0,opacity:1,filter:"blur(0px)",ease:"power2.out",force3D:!0,scrollTrigger:{trigger:e,start:"top 80%",end:"top 30%",scrub:1.5,invalidateOnRefresh:!0},delay:.05*i})}initMarquee(){const e=document.querySelector(".marquee__wrapper");if(!e||e.dataset.cloned)return;e.innerHTML+=e.innerHTML,e.dataset.cloned="true";const t=e.scrollWidth/2;let i=-t;const r=()=>{i+=.8,i>=0&&(i=-t),e.style.transform=`translate3d(${i}px, 0, 0)`,this.rafId=requestAnimationFrame(r)};r()}initAccordion(){const e=this.safeQuerySelectorAll(".accordion__item");e.forEach((t=>{const i=t.querySelector(".accordion__button"),r=t.querySelector(".accordion__content");if(!i||!r)return;const o=t.classList.contains("is-open");gsap.set(r,{height:o?"auto":0,overflow:o?"visible":"hidden"}),i.addEventListener("click",(()=>this.handleAccordionClick(t,r,e)))}))}handleAccordionClick(e,t,i){const r=e.classList.contains("is-open");if(i.forEach((t=>{if(t===e&&!r)return;t.classList.remove("is-open");const i=t.querySelector(".accordion__content");i&&gsap.to(i,{height:0,duration:.4,ease:"power2.inOut",onComplete:()=>{i.style.overflow="hidden"}})})),!r){e.classList.add("is-open"),t.style.height="auto",t.style.overflow="visible";const i=t.scrollHeight+20;t.style.height="0px",t.style.overflow="hidden",gsap.to(t,{height:i,duration:.4,ease:"power2.out",onComplete:()=>{t.style.overflow="visible"}})}}}const animationsManager=new AnimationsManager,initSpeakersSlider=()=>{const e=document.querySelector(".speakers");if(!e)return;const t=new Swiper(".speakers .swiper",{direction:"horizontal",speed:800,spaceBetween:16,slidesPerView:"auto",autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{0:{spaceBetween:12},768:{spaceBetween:16}}});t.autoplay.stop();new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?t.autoplay.start():t.autoplay.stop()}))}),{threshold:.3,rootMargin:"0px"}).observe(e)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initSpeakersSlider):initSpeakersSlider();