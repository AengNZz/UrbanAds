gsap.registerPlugin(ScrollTrigger);class AnimationsManager{constructor(){this.isInitialized=!1,this.previousWidth=window.innerWidth,this.init()}init(){this.isInitialized||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.initAllAnimations())):this.initAllAnimations(),this.setupEventListeners(),this.isInitialized=!0)}setupEventListeners(){window.addEventListener("resize",(()=>this.handleResize()))}handleResize(){ScrollTrigger.refresh(),this.previousWidth!==window.innerWidth&&(setTimeout((()=>ScrollTrigger.refresh()),300),this.previousWidth=window.innerWidth)}isMobile(){return window.innerWidth<820}safeQuerySelectorAll(e,t=document){try{return t.querySelectorAll(e)}catch{return[]}}initAllAnimations(){this.killAllAnimations(),this.isMobile()||(this.initHeroAnimation(),this.initDecorAnimations()),this.initMarquee(),this.initAccordion(),setTimeout((()=>ScrollTrigger.refresh()),100)}killAllAnimations(){ScrollTrigger.getAll().forEach((e=>e.kill()))}initHeroAnimation(){const e=gsap.timeline();[{selector:".hero__logo",y:-30,scale:.85},{selector:".key",y:-30,scale:.85,position:"-=0.6"},{selector:".hero__company-list, .hero__company-item svg",y:20,scale:.9,stagger:.08,position:"-=0.6"},{selector:".hero__data-item",y:20,scale:.9,stagger:.08,position:"-=0.6"},{selector:".hero__text",y:25,scale:.9,position:"-=0.6"}].forEach((({selector:t,position:i,...o})=>{const r=this.safeQuerySelectorAll(t);r.length&&e.from(r,{duration:.8,opacity:0,ease:"back.out(1.7)",...o},i)}))}getElementPositionRatio(e){if(!e.parentElement)return{x:.5,y:.5};const t=e.getBoundingClientRect(),i=e.parentElement.getBoundingClientRect();return{x:(t.left-i.left+t.width/2)/i.width,y:(t.top-i.top+t.height/2)/i.height}}getDisappearAnimation({x:e,y:t}){const i=(e,t)=>this.randomBetween(e,t);return e<.4?{x:i(-120,-80),y:i(30,60),scale:.97}:e>.6?{x:i(80,120),y:i(30,60),scale:.97}:t<.4?{x:i(-40,40),y:i(-120,-80),scale:.97}:t>.6?{x:i(-40,40),y:i(80,120),scale:.97}:{x:0,y:i(30,60),scale:.8}}getAppearAnimation({x:e,y:t}){const i=(e,t)=>this.randomBetween(e,t);return e<.4?{x:i(-120,-80),y:i(30,60),scale:.8,rotate:i(-25,-15)}:e>.6?{x:i(80,120),y:i(30,60),scale:.8,rotate:i(15,25)}:t<.4?{x:i(-40,40),y:i(-120,-80),scale:.8,rotate:i(-10,10)}:t>.6?{x:i(-40,40),y:i(80,120),scale:.8,rotate:i(-10,10)}:{x:0,y:i(50,80),scale:.7}}randomBetween(e,t){return gsap.utils.random(e,t)}initDecorAnimations(){[{selector:".hero-decor *",type:"disappear",start:"center 6%"},{selector:".for-whom-decor .decor *",type:"disappear",start:"center 42%"},{selector:".program-decor .decor *",type:"disappear",start:"center 30%"},{selector:".faq-decor .decor",type:"appear",start:"top top"}].forEach((({selector:e,type:t,start:i})=>{const o=this.safeQuerySelectorAll(e);o.length&&this.animateDecorElements(o,t,i)}))}animateDecorElements(e,t,i){e.forEach(((e,o)=>{const r=this.getElementPositionRatio(e),n="disappear"===t?this.getDisappearAnimation(r):this.getAppearAnimation(r);"disappear"===t?this.createDisappearAnimation(e,n,i,o):this.createAppearAnimation(e,n,o)}))}createDisappearAnimation(e,t,i,o){gsap.fromTo(e,{x:0,y:0,scale:1,opacity:1,filter:"blur(0px)"},{...t,opacity:0,filter:"blur(8px)",ease:"power3.out",scrollTrigger:{trigger:e,start:i,end:"bottom 20%",scrub:2,toggleActions:"play none none reverse"},delay:.025*o})}createAppearAnimation(e,t,i){gsap.fromTo(e,{...t,opacity:0,filter:"blur(12px)"},{x:0,y:0,scale:1,rotate:0,opacity:1,filter:"blur(0px)",ease:"power2.out",scrollTrigger:{trigger:e,start:"top 80%",end:"top 30%",scrub:1.5},delay:.05*i})}initMarquee(){const e=document.querySelector(".marquee__wrapper");if(!e||e.dataset.cloned)return;e.innerHTML+=e.innerHTML,e.dataset.cloned="true";const t=e.scrollWidth/2;let i=-t;const o=()=>{i+=.8,i>=0&&(i=-t),e.style.transform=`translateX(${i}px)`,requestAnimationFrame(o)};o()}initAccordion(){const e=this.safeQuerySelectorAll(".accordion__item");e.forEach((t=>{const i=t.querySelector(".accordion__button"),o=t.querySelector(".accordion__content");i&&o&&(gsap.set(o,t.classList.contains("is-open")?{height:"auto",overflow:"visible"}:{height:0,overflow:"hidden"}),i.addEventListener("click",(()=>this.handleAccordionClick(t,o,e))))}))}handleAccordionClick(e,t,i){const o=e.classList.contains("is-open");if(i.forEach((t=>{if(t===e&&!o)return;t.classList.remove("is-open");const i=t.querySelector(".accordion__content");i&&gsap.to(i,{height:0,duration:.4,ease:"power2.inOut",onComplete:()=>i.style.overflow="hidden"})})),!o){e.classList.add("is-open"),t.style.overflow="visible";const i=t.scrollHeight+20;t.style.overflow="hidden",gsap.to(t,{height:i,duration:.4,ease:"power2.out",onComplete:()=>t.style.overflow="visible"})}}}const animationsManager=new AnimationsManager,speakers=new Swiper(".speakers .swiper",{direction:"horizontal",speed:800,spaceBetween:16,slidesPerView:"auto",breakpoints:{0:{spaceBetween:12},768:{spaceBetween:16}}});